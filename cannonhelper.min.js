function CannonHelper(e,t,o,i){i||(i=1/60),this.bodies=[],this.world=new CANNON.World,this.world.gravity.set(e,t,o),this.world.broadphase=new CANNON.NaiveBroadphase,this.timeStep=i,this.newBody=function(e,t,o){var i=new CANNON.Body({mass:t});o||(o=this.getGeometry(e)),i.addShape(o),i.parent=e,i.position.copy(e.position),i.quaternion.copy(e.quaternion);var n=this;return i.addPart=function(e,t){t||(t=n.getGeometry(e));var o=new CANNON.Vec3,i=new CANNON.Vec3;o.copy(e.position),i.copy(e.quaternion),this.addShape(t,o)},i},this.getGeometry=function(e){var t={},o=e.geometry,i=o.parameters;switch(o.type){case"BoxGeometry":t=new CANNON.Box(new CANNON.Vec3(i.width/2,i.height/2,i.depth/2));break;case"SphereGeometry":t=new CANNON.Sphere(i.radius);break;case"CylinderGeometry":t=new CANNON.Cylinder(i.radiusTop,i.radiusBottom,i.height,i.radialSegments);var n=new CANNON.Quaternion;n.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);var r=new CANNON.Vec3(0,0,0);t.transformAllPoints(r,n);break;case"PlaneGeometry":t=new CANNON.Box(new CANNON.Vec3(i.width/2,i.height/2,.5));break;default:console.log("Specify a Cannon.js shape")}return t},this.addBody=function(e,t,o){var i=this.newBody(e,t,o);this.add(i)},this.add=function(e){this.world.add(e),this.bodies.push(e)},this.update=function(){for(var e in this.bodies){var t=this.bodies[e];t.parent?(t.parent.position.copy(t.position),t.parent.quaternion.copy(t.quaternion)):this.world.remove(t)}this.world.step(this.timeStep)}}